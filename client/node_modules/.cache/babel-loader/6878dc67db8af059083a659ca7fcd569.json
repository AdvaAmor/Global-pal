{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\finalproject__adva_sapir\\\\FinalProject\\\\Global-pal\\\\client\\\\src\\\\components\\\\myNotebook\\\\Folder.js\";\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFolder } from '@fortawesome/free-solid-svg-icons';\nimport { Link } from 'react-router-dom';\nimport { Button } from 'react-bootstrap';\nimport { faFile } from \"@fortawesome/free-solid-svg-icons\";\nimport { ContextMenu, MenuItem, ContextMenuTrigger } from \"react-contextmenu\";\nimport { FaRegTrashAlt } from \"react-icons/fa\";\nimport { storage, database } from \"../../firebase\";\nimport { useParams, useLocation } from 'react-router-dom';\nimport { useFolder } from '../../hooks/useFolder';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction DeleteFolder(folderId, profile, path) {\n  if (folderId == null) return;\n  database.files.where(\"folderId\", \"==\", folderId).where(\"userId\", \"==\", profile.user._id).get().then(querySnapshot => {\n    querySnapshot.forEach(doc => {\n      const file = database.formatDoc(doc);\n      const desertRef = storage.ref().child(`files/${file.userId}/${path}/${file.name}`);\n      console.log(\"deleting files: \" + `files/${file.userId}/${path}/${file.name}`);\n      desertRef.delete().then(() => {\n        console.log(\"the file delete from the store\");\n        database.files.doc(file.id).delete().then(() => {\n          console.log(\"the file delete from data bass\");\n        }).catch(() => {\n          console.log(\"the file is not delete from data\");\n        });\n      }).catch(error => {\n        console.log(error, \"the file is not delete from storeg\");\n      });\n    });\n  });\n  database.folders.where(\"parentId\", \"==\", folderId).where(\"userId\", \"==\", profile.user._id).get().then(querySnapshot => {\n    querySnapshot.forEach(doc => {\n      console.log(\"call other folder\");\n      const folder = database.formatDoc(doc);\n      DeleteFolder(folder.id, profile, `${path}/${folder.name}`);\n    });\n  });\n  console.log(\"delete folder\");\n  database.folders.doc(folderId).delete().then(() => {\n    console.log(\"the file delete from data bass\");\n  }).catch(() => {\n    console.log(\"the file is not delete from data\");\n  });\n}\n\n_c = DeleteFolder;\nexport default function Folder({\n  folder,\n  index,\n  profile,\n  AuthUserId,\n  path\n}) {\n  if (path === 'Root') {\n    path = '';\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [profile.user._id === AuthUserId && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(ContextMenuTrigger, {\n        id: index,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          to: {\n            pathname: `/folder/${folder.id}`,\n            state: {\n              folder: folder\n            }\n          },\n          variant: \"outline-dark\",\n          className: \"text-truncate w-100\",\n          as: Link,\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faFolder,\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 14\n          }, this), folder.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(ContextMenu, {\n        id: index,\n        className: \"adva\",\n        children: /*#__PURE__*/_jsxDEV(MenuItem, {\n          className: \"adva1\",\n          onClick: () => DeleteFolder(folder.id, profile, path + \"/\" + folder.name),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(FaRegTrashAlt, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 12\n            }, this), \". delete\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true), profile.user._id !== AuthUserId && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        to: {\n          pathname: `/folder/${folder.id}`,\n          state: {\n            folder: folder\n          }\n        },\n        variant: \"outline-dark\",\n        className: \"text-truncate w-100\",\n        as: Link,\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faFolder,\n          className: \"mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 12\n        }, this), folder.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 12\n      }, this)\n    }, void 0, false)]\n  }, void 0, true);\n}\n_c2 = Folder;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"DeleteFolder\");\n$RefreshReg$(_c2, \"Folder\");","map":{"version":3,"sources":["C:/Users/User/Desktop/finalproject__adva_sapir/FinalProject/Global-pal/client/src/components/myNotebook/Folder.js"],"names":["React","FontAwesomeIcon","faFolder","Link","Button","faFile","ContextMenu","MenuItem","ContextMenuTrigger","FaRegTrashAlt","storage","database","useParams","useLocation","useFolder","DeleteFolder","folderId","profile","path","files","where","user","_id","get","then","querySnapshot","forEach","doc","file","formatDoc","desertRef","ref","child","userId","name","console","log","delete","id","catch","error","folders","folder","Folder","index","AuthUserId","pathname","state"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport { faFolder } from '@fortawesome/free-solid-svg-icons';\r\nimport {Link} from 'react-router-dom';\r\nimport {Button} from 'react-bootstrap';\r\n\r\nimport { faFile } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { ContextMenu, MenuItem, ContextMenuTrigger } from \"react-contextmenu\";\r\nimport { FaRegTrashAlt } from \"react-icons/fa\";\r\nimport { storage,database} from \"../../firebase\";\r\nimport {useParams,useLocation} from 'react-router-dom';\r\nimport { useFolder } from '../../hooks/useFolder';\r\n\r\n\r\n\r\nfunction DeleteFolder(folderId,profile,path){\r\n    \r\n    \r\n    if (folderId == null)\r\n        return;\r\n    \r\n\r\n    database.files.\r\n    where(\"folderId\",\"==\",folderId)\r\n    .where(\"userId\",\"==\",profile.user._id)\r\n    .get()\r\n    .then((querySnapshot) => {\r\n        querySnapshot.forEach((doc) => {\r\n            const file = database.formatDoc(doc)\r\n              \r\n            const desertRef = storage.ref().child(`files/${file.userId}/${path}/${file.name}`);\r\n            console.log(\"deleting files: \" + `files/${file.userId}/${path}/${file.name}`)\r\n\r\n            desertRef.delete().then(() => {\r\n                console.log(\"the file delete from the store\");\r\n            database.files.doc(file.id).delete().then(()=>{\r\n                console.log(\"the file delete from data bass\");\r\n            }).catch(()=>{\r\n                console.log(\"the file is not delete from data\")\r\n            })\r\n            }).catch((error) => {\r\n                console.log(error,\"the file is not delete from storeg\")\r\n            });\r\n        });\r\n    })\r\n  \r\n    database.folders.\r\n    where(\"parentId\",\"==\",folderId)\r\n    .where(\"userId\",\"==\",profile.user._id)\r\n    .get()\r\n    .then((querySnapshot) => {\r\n         querySnapshot.forEach((doc) => {\r\n            console.log(\"call other folder\")\r\n             const folder = database.formatDoc(doc)\r\n             DeleteFolder(folder.id, profile,`${path}/${folder.name}`)\r\n\r\n         })\r\n})\r\n    console.log(\"delete folder\")\r\n\r\n    database.folders.doc(folderId).delete().then(()=>{\r\n                console.log(\"the file delete from data bass\");\r\n    }).catch(()=>{\r\n                console.log(\"the file is not delete from data\")\r\n    })\r\n    \r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default function Folder({folder,index,profile,AuthUserId,path}) {\r\n    if (path==='Root'){\r\n        path='';\r\n      }\r\n\r\n    return (\r\n        <>\r\n        {profile.user._id === AuthUserId  && (\r\n            <>\r\n     <ContextMenuTrigger id={index}>\r\n     <Button \r\n             to={{\r\n                 pathname:`/folder/${folder.id}`,\r\n                  state: {folder:folder},\r\n              }}\r\n              variant=\"outline-dark\" \r\n              className=\"text-truncate w-100\" \r\n              as={Link}>\r\n             <FontAwesomeIcon icon={faFolder} className=\"mr-2\" />\r\n             {folder.name}\r\n             </Button>\r\n    \r\n      </ContextMenuTrigger>\r\n   \r\n    <ContextMenu id={index} className=\"adva\">\r\n        <MenuItem  className=\"adva1\" onClick={()=>DeleteFolder(folder.id,profile,path+\"/\"+folder.name)} >\r\n          <div>\r\n           <FaRegTrashAlt/>\r\n          . delete\r\n          </div>\r\n        </MenuItem>\r\n      </ContextMenu>\r\n      </>\r\n   )}\r\n        \r\n        {profile.user._id !== AuthUserId  && (\r\n            <>\r\n           <Button \r\n           to={{\r\n               pathname:`/folder/${folder.id}`,\r\n                state: {folder:folder},\r\n            }}\r\n            variant=\"outline-dark\" \r\n            className=\"text-truncate w-100\" \r\n            as={Link}>\r\n           <FontAwesomeIcon icon={faFolder} className=\"mr-2\" />\r\n           {folder.name}\r\n           </Button>\r\n           </>\r\n        )}\r\n           </>\r\n          \r\n        \r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}